#!/bin/sh

LOGFILE=test.log

git checkout ../public/data/*.json

date "+Test Date: %Y-%m-%d, Time: %H:%M:%S" > "$LOGFILE"
git log -1 >> "$LOGFILE"

echo >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 'pip install -r ./requirements.txt' >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 
echo '----------------------------------------------------------------' 
echo 'pip install -r ./requirements.txt'
echo '----------------------------------------------------------------'
pip install -r ./requirements.txt 2>&1 | tee -a "$LOGFILE"

echo >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 'getchannels.py' >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 
echo '----------------------------------------------------------------' 
echo 'getchannels.py'
echo '----------------------------------------------------------------'
python getchannels.py 2>&1 | tee -a "$LOGFILE"

echo >> "$LOGFILE" 
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 'getstats.py' >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 
echo '----------------------------------------------------------------' 
echo 'getstats.py'
echo '----------------------------------------------------------------'
python getstats.py 2>&1 | tee -a "$LOGFILE"

echo >> "$LOGFILE" 
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 'git status' >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 
echo '----------------------------------------------------------------' 
echo 'git status'
echo '----------------------------------------------------------------'
git status 2>&1 | tee -a "$LOGFILE"

echo >> "$LOGFILE" 
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 'git diff' >> "$LOGFILE"
echo '----------------------------------------------------------------' >> "$LOGFILE"
echo 
echo '----------------------------------------------------------------' 
echo 'git diff'
echo '----------------------------------------------------------------'
git diff 2>&1 | tee -a "$LOGFILE"

echo >> "$LOGFILE" 
echo 
